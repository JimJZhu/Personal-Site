'use strict';

$(document).ready(function () {
  // Add smooth scrolling to all links
  $('li a').on('click', function (event) {
    // Make sure this.hash has a value before overriding default behavior
    if (event.target.hash !== '') {
      // Prevent default anchor click behavior
      event.preventDefault();

      // Store hash
      var docHash = event.target.hash;
      // Using jQuery's animate() method to add smooth page scroll
      // The optional number (800) specifies the number of millis it takes to scroll
      $('html, body').animate({
        scrollTop: $(docHash).offset().top
      }, 800, function () {
        // Add hash (#) to URL when done scrolling (default click behavior)
        window.location.hash = docHash;
      });
    } // End if
  });
});

(function (window, document) {
  var layout = document.getElementById('layout');
  var menu = document.getElementById('menu');
  var menuLink = document.getElementById('menuLink');
  var content = document.getElementById('main');

  function toggleClass(element, className) {
    var classes = element.className.split(/\s+/);
    var len = classes.length;
    var i = 0;

    for (; i < len; i += 1) {
      if (classes[i] === className) {
        classes.splice(i, 1);
        break;
      }
    }
    // The className is not found
    if (len === classes.length) {
      classes.push(className);
    }

    element.className = classes.join(' ');
  }

  function toggleAll(e) {
    var active = 'active';

    e.preventDefault();
    toggleClass(layout, active);
    toggleClass(menu, active);
    toggleClass(menuLink, active);
  }

  menuLink.onclick = function (e) {
    toggleAll(e);
  };

  content.onclick = function (e) {
    if (menu.className.indexOf('active') !== -1) {
      toggleAll(e);
    }
  };
})(window, window.document);
